{"ast":null,"code":"import _classCallCheck from \"C:\\\\work\\\\Project\\\\reactJs\\\\observatoire\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\work\\\\Project\\\\reactJs\\\\observatoire\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\work\\\\Project\\\\reactJs\\\\observatoire\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\work\\\\Project\\\\reactJs\\\\observatoire\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\work\\\\Project\\\\reactJs\\\\observatoire\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\work\\\\Project\\\\reactJs\\\\observatoire\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\work\\\\Project\\\\reactJs\\\\observatoire\\\\src\\\\components\\\\type\\\\index.jsx\";\nimport './style.css';\nimport React from 'react';\nimport * as d3 from 'd3';\nimport Details from './details.jsx';\nimport wdscroll_bas from \"./wdscroll_bas.svg\";\n\nvar Type =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Type, _React$Component);\n\n  function Type(props) {\n    var _this;\n\n    _classCallCheck(this, Type);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Type).call(this, props));\n    _this.map = {};\n    _this.next = _this.next.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      data: [],\n      detailsByCountry: [],\n      indiceInit: 0\n    };\n    return _this;\n  }\n\n  _createClass(Type, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var that = this;\n      var root = partition(data);\n      var svg = d3.select('#type').append(\"svg\").attr(\"id\", \"svg\").style(\"width\", \"100%\").style(\"height\", \"auto\").attr(\"class\", \"svg\").style(\"box-sizing\", \"border-box\");\n      var g = svg.append(\"g\");\n      g.append(\"g\").attr(\"fill-opacity\", 0.6).selectAll(\"path\").data(root.descendants().filter(function (d) {\n        return d.depth;\n      })).enter().append(\"path\").attr(\"fill\", function (d) {\n        while (d.depth > 1) {\n          d = d.parent;\n        }\n\n        return color(d.data.name);\n      }).attr(\"d\", arc).append(\"title\").text(function (d) {\n        return \"\".concat(d.ancestors().map(function (d) {\n          return d.data.name;\n        }).reverse().join(\"/\"), \"\\n\").concat(format(d.value));\n      });\n      g.append(\"g\").attr(\"pointer-events\", \"none\").attr(\"text-anchor\", \"middle\").selectAll(\"text\").data(root.descendants().filter(function (d) {\n        return d.depth && (d.y0 + d.y1) / 2 * (d.x1 - d.x0) > 10;\n      })).enter().append(\"text\").attr(\"transform\", function (d) {\n        var x = (d.x0 + d.x1) / 2 * 180 / Math.PI;\n        var y = (d.y0 + d.y1) / 2;\n        return \"rotate(\".concat(x - 90, \") translate(\").concat(y, \",0) rotate(\").concat(x < 180 ? 0 : 180, \")\");\n      }).attr(\"dy\", \"0.35em\").text(function (d) {\n        return d.data.name;\n      });\n      document.body.appendChild(svg.node());\n      var box = g.node().getBBox();\n      svg.remove().attr(\"width\", box.width).attr(\"height\", box.height).attr(\"viewBox\", \"\".concat(box.x, \" \").concat(box.y, \" \").concat(box.width, \" \").concat(box.height));\n\n      var data = require(\"flare\");\n\n      var partition = function partition(data) {\n        return d3.partition().size([2 * Math.PI, radius])(d3.hierarchy(data).sum(function (d) {\n          return d.size;\n        }).sort(function (a, b) {\n          return b.value - a.value;\n        }));\n      }; //var color = d3.scaleOrdinal().range(d3.quantize(d3.interpolateRainbow, data.children.length + 1));\n      // Breadcrumb dimensions: width, height, spacing, width of tip/tail.\n\n\n      var b = {\n        w: 75,\n        h: 30,\n        s: 3,\n        t: 10\n      }; // Mapping of step names to colors.\n\n      var colors = {\n        \"home\": \"#5687d1\",\n        \"product\": \"#7b615c\",\n        \"search\": \"#de783b\",\n        \"account\": \"#6ab975\",\n        \"other\": \"#a173d1\",\n        \"end\": \"#bbbbbb\"\n      };\n      format = d3.format(\",d\");\n      var width = 932;\n      var radius = width / 2;\n      var arc = d3.arc().startAngle(function (d) {\n        return d.x0;\n      }).endAngle(function (d) {\n        return d.x1;\n      }).padAngle(function (d) {\n        return Math.min((d.x1 - d.x0) / 2, 0.005);\n      }).padRadius(radius / 2).innerRadius(function (d) {\n        return d.y0;\n      }).outerRadius(function (d) {\n        return d.y1 - 1;\n      });\n    }\n  }, {\n    key: \"next\",\n    value: function next() {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        id: \"Typo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"arrow-top\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"#section1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: wdscroll_bas,\n        alt: \"arrow_top\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }))), React.createElement(\"p\", {\n        className: \"arrow-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"#section-mapping\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: wdscroll_bas,\n        alt: \"arrow_right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return Type;\n}(React.Component);\n\nexport default Map;","map":{"version":3,"sources":["C:\\work\\Project\\reactJs\\observatoire\\src\\components\\type\\index.jsx"],"names":["React","d3","Details","Type","props","map","next","bind","state","data","detailsByCountry","indiceInit","that","root","partition","svg","select","append","attr","style","g","selectAll","descendants","filter","d","depth","enter","parent","color","name","arc","text","ancestors","reverse","join","format","value","y0","y1","x1","x0","x","Math","PI","y","document","body","appendChild","node","box","getBBox","remove","width","height","require","size","radius","hierarchy","sum","sort","a","b","w","h","s","t","colors","startAngle","endAngle","padAngle","min","padRadius","innerRadius","outerRadius","wdscroll_bas","Component","Map"],"mappings":"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","sourcesContent":["import './style.css';\r\nimport React from 'react';\r\nimport * as d3 from 'd3';\r\nimport Details from './details.jsx';\r\nimport wdscroll_bas from './wdscroll_bas.svg';\r\n\r\nclass Type extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.map = {};\r\n        this.next = this.next.bind(this);\r\n        this.state = { data: []\r\n            , detailsByCountry: []\r\n            , indiceInit: 0\r\n            }\r\n    }\r\n    \r\n    componentDidMount() {\r\n        let that = this;\r\n        const root = partition(data);\r\n        \r\n        const svg = d3.select('#type').append(\"svg\")\r\n        .attr(\"id\", \"svg\")\r\n        .style(\"width\", \"100%\")\r\n        .style(\"height\", \"auto\")\r\n        .attr(\"class\", \"svg\")\r\n        .style(\"box-sizing\", \"border-box\");\r\n            \r\n        const g = svg.append(\"g\");\r\n\r\n        g.append(\"g\")\r\n            .attr(\"fill-opacity\", 0.6)\r\n            .selectAll(\"path\")\r\n            .data(root.descendants().filter(d => d.depth))\r\n            .enter().append(\"path\")\r\n            .attr(\"fill\", d => { while (d.depth > 1) d = d.parent; return color(d.data.name); })\r\n            .attr(\"d\", arc)\r\n            .append(\"title\")\r\n            .text(d => `${d.ancestors().map(d => d.data.name).reverse().join(\"/\")}\\n${format(d.value)}`);\r\n\r\n        g.append(\"g\")\r\n            .attr(\"pointer-events\", \"none\")\r\n            .attr(\"text-anchor\", \"middle\")\r\n            .selectAll(\"text\")\r\n            .data(root.descendants().filter(d => d.depth && (d.y0 + d.y1) / 2 * (d.x1 - d.x0) > 10))\r\n            .enter().append(\"text\")\r\n            .attr(\"transform\", function(d) {\r\n                const x = (d.x0 + d.x1) / 2 * 180 / Math.PI;\r\n                const y = (d.y0 + d.y1) / 2;\r\n                return `rotate(${x - 90}) translate(${y},0) rotate(${x < 180 ? 0 : 180})`;\r\n            })\r\n            .attr(\"dy\", \"0.35em\")\r\n            .text(d => d.data.name);\r\n\r\n        document.body.appendChild(svg.node());\r\n\r\n        const box = g.node().getBBox();\r\n\r\n        svg.remove()\r\n            .attr(\"width\", box.width)\r\n            .attr(\"height\", box.height)\r\n            .attr(\"viewBox\", `${box.x} ${box.y} ${box.width} ${box.height}`);\r\n\r\n        var data = require(\"flare\");\r\n        \r\n        var partition = data => d3.partition()\r\n            .size([2 * Math.PI, radius])\r\n        (d3.hierarchy(data)\r\n            .sum(d => d.size)\r\n            .sort((a, b) => b.value - a.value));\r\n        \r\n        //var color = d3.scaleOrdinal().range(d3.quantize(d3.interpolateRainbow, data.children.length + 1));\r\n\r\n        // Breadcrumb dimensions: width, height, spacing, width of tip/tail.\r\n        var b = {\r\n            w: 75, h: 30, s: 3, t: 10\r\n        };\r\n        \r\n        // Mapping of step names to colors.\r\n        var colors = {\r\n            \"home\": \"#5687d1\",\r\n            \"product\": \"#7b615c\",\r\n            \"search\": \"#de783b\",\r\n            \"account\": \"#6ab975\",\r\n            \"other\": \"#a173d1\",\r\n            \"end\": \"#bbbbbb\"\r\n        };\r\n\r\n        format = d3.format(\",d\");\r\n\r\n        let width = 932;\r\n\r\n        let radius = width / 2;\r\n\r\n        var arc = d3.arc()\r\n            .startAngle(d => d.x0)\r\n            .endAngle(d => d.x1)\r\n            .padAngle(d => Math.min((d.x1 - d.x0) / 2, 0.005))\r\n            .padRadius(radius / 2)\r\n            .innerRadius(d => d.y0)\r\n            .outerRadius(d => d.y1 - 1);\r\n\r\n    }\r\n    \r\n    next() {\r\n       \r\n    }\r\n\r\n    render() {\r\n    return <div id=\"Typo\">\r\n        <p className=\"arrow-top\"><a href=\"#section1\"><img src={wdscroll_bas} alt=\"arrow_top\" /></a></p>\r\n        <p className=\"arrow-right\"><a href=\"#section-mapping\"><img src={wdscroll_bas} alt=\"arrow_right\" /></a></p>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default Map;"]},"metadata":{},"sourceType":"module"}