{"ast":null,"code":"'use strict';\n\nvar _jsxFileName = \"C:\\\\work\\\\Project\\\\reactJs\\\\observatoire\\\\src\\\\components\\\\type\\\\chart.jsx\",\n    _this = this;\n\nvar React = require('react');\n\nfunction renderArticles(articles) {\n  if (articles.length > 0) {\n    return articles.map(function (article, index) {\n      return React.createElement(Article, {\n        key: index,\n        article: article,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 8\n        },\n        __self: this\n      });\n    });\n  } else return [];\n}\n\nvar Article = function Article(_ref) {\n  var article = _ref.article;\n  return React.createElement(\"article\", {\n    key: article.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    href: article.link,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17\n    },\n    __self: this\n  }, article.title), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18\n    },\n    __self: this\n  }, article.description));\n};\n\nvar chart = function chart() {\n  var url = \"./flare.json\";\n  d3.json(url, function (data) {\n    console.log(data);\n  });\n\n  var partition = function partition(data) {\n    return d3.partition().size([2 * Math.PI, radius])(d3.hierarchy(data).sum(function (d) {\n      return d.size;\n    }).sort(function (a, b) {\n      return b.value - a.value;\n    }));\n  };\n\n  var color = d3.scaleOrdinal().range(d3.quantize(d3.interpolateRainbow, _this.data.children.length + 1));\n  var format = d3.format(\",d\");\n  var width = 932;\n  var radius = width / 2;\n  var arc = d3.arc().startAngle(function (d) {\n    return d.x0;\n  }).endAngle(function (d) {\n    return d.x1;\n  }).padAngle(function (d) {\n    return Math.min((d.x1 - d.x0) / 2, 0.005);\n  }).padRadius(radius / 2).innerRadius(function (d) {\n    return d.y0;\n  }).outerRadius(function (d) {\n    return d.y1 - 1;\n  });\n\n  var root = _this.partition(_this.data);\n\n  var svg = d3.select(\"#type\").style(\"width\", \"100%\").style(\"height\", \"auto\").style(\"padding\", \"10px\").style(\"font\", \"10px sans-serif\").style(\"box-sizing\", \"border-box\");\n  var g = svg.append(\"g\");\n  g.append(\"g\").attr(\"fill-opacity\", 0.6).selectAll(\"path\").data(root.descendants().filter(function (d) {\n    return d.depth;\n  })).enter().append(\"path\").attr(\"fill\", function (d) {\n    while (d.depth > 1) {\n      d = d.parent;\n    }\n\n    return _this.color(d.data.name);\n  }).attr(\"d\", _this.arc).append(\"title\").text(function (d) {\n    return \"\".concat(d.ancestors().map(function (d) {\n      return d.data.name;\n    }).reverse().join(\"/\"), \"\\n\").concat(_this.format(d.value));\n  });\n  g.append(\"g\").attr(\"pointer-events\", \"none\").attr(\"text-anchor\", \"middle\").selectAll(\"text\").data(root.descendants().filter(function (d) {\n    return d.depth && (d.y0 + d.y1) / 2 * (d.x1 - d.x0) > 10;\n  })).enter().append(\"text\").attr(\"transform\", function (d) {\n    var x = (d.x0 + d.x1) / 2 * 180 / Math.PI;\n    var y = (d.y0 + d.y1) / 2;\n    return \"rotate(\".concat(x - 90, \") translate(\").concat(y, \",0) rotate(\").concat(x < 180 ? 0 : 180, \")\");\n  }).attr(\"dy\", \"0.35em\").text(function (d) {\n    return d.data.name;\n  });\n  document.body.appendChild(svg.node());\n  var box = g.node().getBBox();\n  svg.remove().attr(\"width\", box.width).attr(\"height\", box.height).attr(\"viewBox\", \"\".concat(box.x, \" \").concat(box.y, \" \").concat(box.width, \" \").concat(box.height));\n  return svg.node();\n};\n\nvar Articles = React.createClass({\n  displayName: \"Articles\",\n  render: function render() {\n    var articles = renderArticles(this.props.articles);\n    return React.createElement(\"section\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, articles);\n  }\n});\nmodule.exports = Articles;","map":{"version":3,"sources":["C:\\work\\Project\\reactJs\\observatoire\\src\\components\\type\\chart.jsx"],"names":["React","require","renderArticles","articles","length","map","article","index","Article","id","link","title","description","chart","url","d3","json","data","console","log","partition","size","Math","PI","radius","hierarchy","sum","d","sort","a","b","value","color","scaleOrdinal","range","quantize","interpolateRainbow","children","format","width","arc","startAngle","x0","endAngle","x1","padAngle","min","padRadius","innerRadius","y0","outerRadius","y1","root","svg","select","style","g","append","attr","selectAll","descendants","filter","depth","enter","parent","name","text","ancestors","reverse","join","x","y","document","body","appendChild","node","box","getBBox","remove","height","Articles","createClass","render","props","module","exports"],"mappings":"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","sourcesContent":["'use strict';\r\n\r\nconst React = require('react');\r\n\r\nfunction renderArticles(articles) {\r\n    if (articles.length > 0) {      \r\n        return articles.map((article, index) => (\r\n            <Article key={index} article={article} />\r\n        ));\r\n    }\r\n    else return [];\r\n}\r\n\r\nconst Article = ({article}) => {\r\n    return ( \r\n        <article key={article.id}>\r\n            <a href={article.link}>{article.title}</a>\r\n            <p>{article.description}</p>\r\n        </article>\r\n    );\r\n};\r\n\r\nconst chart = () => {\r\n    const url = \"./flare.json\";\r\n    d3.json(url, function (data) {\r\n        console.log(data);\r\n    });\r\n\r\n    const partition = data => d3.partition()\r\n        .size([2 * Math.PI, radius])\r\n    (d3.hierarchy(data)\r\n        .sum(d => d.size)\r\n        .sort((a, b) => b.value - a.value));\r\n    const color = d3.scaleOrdinal().range(d3.quantize(d3.interpolateRainbow, this.data.children.length + 1));\r\n    const format = d3.format(\",d\");\r\n    const width = 932;\r\n    const radius = width / 2;\r\n    const arc = d3.arc()\r\n        .startAngle(d => d.x0)\r\n        .endAngle(d => d.x1)\r\n        .padAngle(d => Math.min((d.x1 - d.x0) / 2, 0.005))\r\n        .padRadius(radius / 2)\r\n        .innerRadius(d => d.y0)\r\n        .outerRadius(d => d.y1 - 1);\r\n        \r\n    const root = this.partition(this.data);      \r\n    const svg = d3.select(\"#type\")\r\n        .style(\"width\", \"100%\")\r\n        .style(\"height\", \"auto\")\r\n        .style(\"padding\", \"10px\")\r\n        .style(\"font\", \"10px sans-serif\")\r\n        .style(\"box-sizing\", \"border-box\");\r\n      \r\n    const g = svg.append(\"g\");\r\n    \r\n    g.append(\"g\")\r\n        .attr(\"fill-opacity\", 0.6)\r\n      .selectAll(\"path\")\r\n      .data(root.descendants().filter(d => d.depth))\r\n      .enter().append(\"path\")\r\n        .attr(\"fill\", d => { while (d.depth > 1) d = d.parent; return this.color(d.data.name); })\r\n        .attr(\"d\", this.arc)\r\n      .append(\"title\")\r\n        .text(d => `${d.ancestors().map(d => d.data.name).reverse().join(\"/\")}\\n${this.format(d.value)}`);\r\n  \r\n    g.append(\"g\")\r\n        .attr(\"pointer-events\", \"none\")\r\n        .attr(\"text-anchor\", \"middle\")\r\n      .selectAll(\"text\")\r\n      .data(root.descendants().filter(d => d.depth && (d.y0 + d.y1) / 2 * (d.x1 - d.x0) > 10))\r\n      .enter().append(\"text\")\r\n        .attr(\"transform\", function(d) {\r\n          const x = (d.x0 + d.x1) / 2 * 180 / Math.PI;\r\n          const y = (d.y0 + d.y1) / 2;\r\n          return `rotate(${x - 90}) translate(${y},0) rotate(${x < 180 ? 0 : 180})`;\r\n        })\r\n        .attr(\"dy\", \"0.35em\")\r\n        .text(d => d.data.name);\r\n  \r\n    document.body.appendChild(svg.node());\r\n  \r\n    const box = g.node().getBBox();\r\n  \r\n    svg.remove()\r\n        .attr(\"width\", box.width)\r\n        .attr(\"height\", box.height)\r\n        .attr(\"viewBox\", `${box.x} ${box.y} ${box.width} ${box.height}`);\r\n  \r\n    return svg.node();\r\n  };\r\n\r\nconst Articles = React.createClass({\r\n    render() {\r\n        const articles = renderArticles(this.props.articles);\r\n\r\n        return (\r\n            <section>\r\n                { articles }\r\n            </section>\r\n        );\r\n    }\r\n});\r\n\r\nmodule.exports = Articles;"]},"metadata":{},"sourceType":"module"}