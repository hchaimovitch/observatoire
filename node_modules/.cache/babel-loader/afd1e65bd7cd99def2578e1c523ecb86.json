{"ast":null,"code":"import _classCallCheck from \"C:\\\\work\\\\Project\\\\reactJs\\\\observatoire\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\work\\\\Project\\\\reactJs\\\\observatoire\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\work\\\\Project\\\\reactJs\\\\observatoire\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\work\\\\Project\\\\reactJs\\\\observatoire\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\work\\\\Project\\\\reactJs\\\\observatoire\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\work\\\\Project\\\\reactJs\\\\observatoire\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\work\\\\Project\\\\reactJs\\\\observatoire\\\\src\\\\components\\\\type\\\\index.jsx\";\nimport './style.css';\nimport React from 'react';\nimport * as d3 from 'd3';\nimport wdscroll_bas from \"./wdscroll_bas.svg\";\n\nvar Type =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Type, _React$Component);\n\n  function Type(props) {\n    var _this;\n\n    _classCallCheck(this, Type);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Type).call(this, props));\n    _this.map = {};\n    _this.next = _this.next.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      data: [],\n      detailsByCountry: [],\n      indiceInit: 0\n    };\n    return _this;\n  }\n\n  _createClass(Type, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var url = \"./flare.json\";\n      d3.json(url, function (data) {\n        console.log(data);\n      });\n\n      var partition = function partition(data) {\n        return d3.partition().size([2 * Math.PI, radius])(d3.hierarchy(data).sum(function (d) {\n          return d.size;\n        }).sort(function (a, b) {\n          return b.value - a.value;\n        }));\n      };\n\n      var color = d3.scaleOrdinal().range(d3.quantize(d3.interpolateRainbow, this.data.children.length + 1));\n      var format = d3.format(\",d\");\n      var width = 932;\n      var radius = width / 2;\n      var arc = d3.arc().startAngle(function (d) {\n        return d.x0;\n      }).endAngle(function (d) {\n        return d.x1;\n      }).padAngle(function (d) {\n        return Math.min((d.x1 - d.x0) / 2, 0.005);\n      }).padRadius(radius / 2).innerRadius(function (d) {\n        return d.y0;\n      }).outerRadius(function (d) {\n        return d.y1 - 1;\n      });\n      var newChart = this.chart();\n    }\n  }, {\n    key: \"chart\",\n    value: function chart() {\n      var _this2 = this;\n\n      var root = this.partition(this.data);\n      var svg = d3.select(\"#type\").style(\"width\", \"100%\").style(\"height\", \"auto\").style(\"padding\", \"10px\").style(\"font\", \"10px sans-serif\").style(\"box-sizing\", \"border-box\");\n      var g = svg.append(\"g\");\n      g.append(\"g\").attr(\"fill-opacity\", 0.6).selectAll(\"path\").data(root.descendants().filter(function (d) {\n        return d.depth;\n      })).enter().append(\"path\").attr(\"fill\", function (d) {\n        while (d.depth > 1) {\n          d = d.parent;\n        }\n\n        return _this2.color(d.data.name);\n      }).attr(\"d\", this.arc).append(\"title\").text(function (d) {\n        return \"\".concat(d.ancestors().map(function (d) {\n          return d.data.name;\n        }).reverse().join(\"/\"), \"\\n\").concat(_this2.format(d.value));\n      });\n      g.append(\"g\").attr(\"pointer-events\", \"none\").attr(\"text-anchor\", \"middle\").selectAll(\"text\").data(root.descendants().filter(function (d) {\n        return d.depth && (d.y0 + d.y1) / 2 * (d.x1 - d.x0) > 10;\n      })).enter().append(\"text\").attr(\"transform\", function (d) {\n        var x = (d.x0 + d.x1) / 2 * 180 / Math.PI;\n        var y = (d.y0 + d.y1) / 2;\n        return \"rotate(\".concat(x - 90, \") translate(\").concat(y, \",0) rotate(\").concat(x < 180 ? 0 : 180, \")\");\n      }).attr(\"dy\", \"0.35em\").text(function (d) {\n        return d.data.name;\n      });\n      document.body.appendChild(svg.node());\n      var box = g.node().getBBox();\n      svg.remove().attr(\"width\", box.width).attr(\"height\", box.height).attr(\"viewBox\", \"\".concat(box.x, \" \").concat(box.y, \" \").concat(box.width, \" \").concat(box.height));\n      return svg.node();\n    }\n  }, {\n    key: \"next\",\n    value: function next() {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        id: \"Typo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"arrow-top\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"#section1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: wdscroll_bas,\n        alt: \"arrow_top\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }))), React.createElement(\"p\", {\n        className: \"arrow-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"#section-mapping\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: wdscroll_bas,\n        alt: \"arrow_right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return Type;\n}(React.Component);\n\nexport default Map;","map":{"version":3,"sources":["C:\\work\\Project\\reactJs\\observatoire\\src\\components\\type\\index.jsx"],"names":["React","d3","Type","props","map","next","bind","state","data","detailsByCountry","indiceInit","url","json","console","log","partition","size","Math","PI","radius","hierarchy","sum","d","sort","a","b","value","color","scaleOrdinal","range","quantize","interpolateRainbow","children","length","format","width","arc","startAngle","x0","endAngle","x1","padAngle","min","padRadius","innerRadius","y0","outerRadius","y1","newChart","chart","root","svg","select","style","g","append","attr","selectAll","descendants","filter","depth","enter","parent","name","text","ancestors","reverse","join","x","y","document","body","appendChild","node","box","getBBox","remove","height","wdscroll_bas","Component","Map"],"mappings":"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","sourcesContent":["import './style.css';\r\nimport React from 'react';\r\nimport * as d3 from 'd3';\r\nimport wdscroll_bas from './wdscroll_bas.svg';\r\n\r\nclass Type extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.map = {};\r\n        this.next = this.next.bind(this);\r\n        this.state = { data: []\r\n            , detailsByCountry: []\r\n            , indiceInit: 0\r\n            }\r\n    }\r\n    \r\n    componentDidMount() {\r\n        const url = \"./flare.json\";\r\n        d3.json(url, function (data) {\r\n            console.log(data);\r\n        });\r\n\r\n        const partition = data => d3.partition()\r\n            .size([2 * Math.PI, radius])\r\n        (d3.hierarchy(data)\r\n            .sum(d => d.size)\r\n            .sort((a, b) => b.value - a.value));\r\n        const color = d3.scaleOrdinal().range(d3.quantize(d3.interpolateRainbow, this.data.children.length + 1));\r\n        const format = d3.format(\",d\");\r\n        const width = 932;\r\n        const radius = width / 2;\r\n        const arc = d3.arc()\r\n            .startAngle(d => d.x0)\r\n            .endAngle(d => d.x1)\r\n            .padAngle(d => Math.min((d.x1 - d.x0) / 2, 0.005))\r\n            .padRadius(radius / 2)\r\n            .innerRadius(d => d.y0)\r\n            .outerRadius(d => d.y1 - 1);\r\n        \r\n        let newChart = this.chart();\r\n \r\n    }\r\n\r\n    chart (){\r\n        const root = this.partition(this.data);      \r\n        const svg = d3.select(\"#type\")\r\n            .style(\"width\", \"100%\")\r\n            .style(\"height\", \"auto\")\r\n            .style(\"padding\", \"10px\")\r\n            .style(\"font\", \"10px sans-serif\")\r\n            .style(\"box-sizing\", \"border-box\");\r\n          \r\n        const g = svg.append(\"g\");\r\n        \r\n        g.append(\"g\")\r\n            .attr(\"fill-opacity\", 0.6)\r\n          .selectAll(\"path\")\r\n          .data(root.descendants().filter(d => d.depth))\r\n          .enter().append(\"path\")\r\n            .attr(\"fill\", d => { while (d.depth > 1) d = d.parent; return this.color(d.data.name); })\r\n            .attr(\"d\", this.arc)\r\n          .append(\"title\")\r\n            .text(d => `${d.ancestors().map(d => d.data.name).reverse().join(\"/\")}\\n${this.format(d.value)}`);\r\n      \r\n        g.append(\"g\")\r\n            .attr(\"pointer-events\", \"none\")\r\n            .attr(\"text-anchor\", \"middle\")\r\n          .selectAll(\"text\")\r\n          .data(root.descendants().filter(d => d.depth && (d.y0 + d.y1) / 2 * (d.x1 - d.x0) > 10))\r\n          .enter().append(\"text\")\r\n            .attr(\"transform\", function(d) {\r\n              const x = (d.x0 + d.x1) / 2 * 180 / Math.PI;\r\n              const y = (d.y0 + d.y1) / 2;\r\n              return `rotate(${x - 90}) translate(${y},0) rotate(${x < 180 ? 0 : 180})`;\r\n            })\r\n            .attr(\"dy\", \"0.35em\")\r\n            .text(d => d.data.name);\r\n      \r\n        document.body.appendChild(svg.node());\r\n      \r\n        const box = g.node().getBBox();\r\n      \r\n        svg.remove()\r\n            .attr(\"width\", box.width)\r\n            .attr(\"height\", box.height)\r\n            .attr(\"viewBox\", `${box.x} ${box.y} ${box.width} ${box.height}`);\r\n      \r\n        return svg.node();\r\n      };\r\n    \r\n    next() {\r\n       \r\n    }\r\n\r\n    render() {\r\n    return <div id=\"Typo\">\r\n        <p className=\"arrow-top\"><a href=\"#section1\"><img src={wdscroll_bas} alt=\"arrow_top\" /></a></p>\r\n        <p className=\"arrow-right\"><a href=\"#section-mapping\"><img src={wdscroll_bas} alt=\"arrow_right\" /></a></p>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default Map;"]},"metadata":{},"sourceType":"module"}