{"ast":null,"code":"import _classCallCheck from \"C:\\\\work\\\\Project\\\\reactJs\\\\observatoire\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\work\\\\Project\\\\reactJs\\\\observatoire\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\work\\\\Project\\\\reactJs\\\\observatoire\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\work\\\\Project\\\\reactJs\\\\observatoire\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\work\\\\Project\\\\reactJs\\\\observatoire\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\work\\\\Project\\\\reactJs\\\\observatoire\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\work\\\\Project\\\\reactJs\\\\observatoire\\\\src\\\\components\\\\type\\\\index.jsx\";\nimport './style.css';\nimport React from 'react';\nimport * as d3 from 'd3';\nimport wdscroll_bas from \"./wdscroll_bas.svg\";\n\nvar Type =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Type, _React$Component);\n\n  function Type(props) {\n    var _this;\n\n    _classCallCheck(this, Type);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Type).call(this, props));\n    _this.map = {};\n    _this.next = _this.next.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      data: [],\n      detailsByCountry: [],\n      indiceInit: 0\n    };\n    return _this;\n  }\n\n  _createClass(Type, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var margin = {\n        top: 350,\n        right: 480,\n        bottom: 350,\n        left: 480\n      };\n      var radius = Math.min(margin.top, margin.right, margin.bottom, margin.left) - 10;\n      var x = d3.scaleLinear().range([0, 2 * Math.PI]);\n      var y = d3.scalePow().exponent(1.3).domain([0, 1]).range([0, radius]);\n      var padding = 5; // var hue = d3.scaleCategory10();\n\n      var hue = ['#d4eac7', '#c6e3b5', '#b7dda2', '#a9d68f', '#9bcf7d', '#8cc86a', '#7ec157', '#77be4e', '#70ba45', '#65a83e', '#599537', '#4e8230', '#437029', '#385d22', '#2d4a1c', '#223815']; // colors = ['#d4eac7', '#c6e3b5', '#b7dda2', '#a9d68f', '#9bcf7d', '#8cc86a', '#7ec157', '#77be4e', '#70ba45', '#65a83e', '#599537', '#4e8230', '#437029', '#385d22', '#2d4a1c', '#223815'];\n\n      var luminance = d3.scaleSqrt().domain([0, 1e6]).clamp(true).range([90, 20]);\n      /* var svg = d3.select(\"body\").append(\"svg\")\r\n       .attr(\"width\", width)\r\n       .attr(\"height\", height)\r\n       .append(\"g\")\r\n       .attr(\"transform\", \"translate(\" + width / 2 + \",\" + (height / 2 + 10) + \")\");\r\n       var g = svg.selectAll(\"g\")\r\n       .data(partition.nodes(root))\r\n       .enter().append(\"g\");\r\n       \r\n       var path = g.append(\"path\")\r\n       .attr(\"d\", arc)\r\n       .style(\"fill\", function(d) {\r\n       return color((d.children ? d : d.parent).name);\r\n       })\r\n       .on(\"click\", click);\r\n       var text = g.append(\"text\")\r\n       .attr(\"x\", function(d) {\r\n       return y(d.y);\r\n       })\r\n       .attr(\"dx\", \"6\") // margin\r\n       .attr(\"dy\", \".35em\") // vertical-align\r\n       .text(function(d) {\r\n       return d.name;\r\n       });*/\n\n      var svg = d3.select(\"body\").append(\"svg\").attr(\"width\", margin.left + margin.right).attr(\"height\", margin.top + margin.bottom).append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n      /*\r\n      var partition = d3.layout.partition()\r\n              .sort(function(a, b) {\r\n                  return d3.ascending(a.name, b.name);\r\n              })\r\n              .size([2 * Math.PI, radius]);\r\n        */\n\n      var partition = function partition(data) {\n        return d3.partition().size([2 * Math.PI, radius])(d3.hierarchy(data).sum(function (d) {\n          return d.size;\n        }).sort(function (a, b) {\n          return b.value - a.value;\n        }));\n      };\n\n      var arc = d3.svg.arc().startAngle(function (d) {\n        return d.x;\n      }).endAngle(function (d) {\n        return d.x + d.dx - .01 / (d.depth + .2);\n      }).innerRadius(function (d) {\n        return radius / 3 * d.depth;\n      }).outerRadius(function (d) {\n        return radius / 3 * (d.depth + 1) - 1;\n      });\n      d3.json(\"./flare.json\", function (error, root) {\n        // Compute the initial layout on the entire tree to sum sizes.\n        // Also compute the full name and fill color for each node,\n        // and stash the children so they can be restored as we descend.\n        partition.value(function (d) {\n          return d.size;\n        }).nodes(root).forEach(function (d) {\n          d._children = d.children;\n          d.sum = d.value;\n          d.key = this.key(d);\n          d.fill = this.fill(d);\n        }); // Now redefine the value function to us e the previously-computed sum.\n\n        partition.children(function (d, depth) {\n          return depth < 2 ? d._children : null;\n        }).value(function (d) {\n          return d.sum;\n        });\n        var node = partition.nodes(root).slice(1);\n        var center = svg.append(\"circle\").attr(\"r\", radius / 3);\n        var abc = svg.selectAll(\".arc\").data(node).enter().append(\"g\").attr(\"class\", \"arc\");\n        var path = abc.append(\"path\").attr(\"d\", arc).style(\"fill\", function (d) {\n          return d.fill;\n        }).each(function (d) {\n          this._current = updateArc(d);\n        });\n        var textEnter = abc.append(\"text\").style(\"fill-opacity\", 1).style(\"fill\", \"white\").attr(\"text-anchor\", \"middle\").attr(\"dy\", \".2em\").attr(\"transform\", function (d) {\n          var angle = x(d.x + d.dx / 2) * 180 / Math.PI - 90;\n          return \"translate(\" + arc.centroid(d) + \")rotate(\" + (angle > 90 ? 0 : 0) + \")\";\n        });\n        textEnter.append(\"tspan\").attr(\"x\", 0).text(function (d) {\n          return d.name;\n        });\n        textEnter.append(\"tspan\").attr(\"x\", 0).attr(\"dy\", \"1em\").text(function (d) {\n          return d.depth ? d.name.split(\" \")[1] || \"\" : \"\";\n        });\n      });\n\n      function colour(d) {\n        if (d.children) {\n          // There is a maximum of two children!\n          var colours = d.children.map(colour),\n              a = d3.hsl(colours[0]),\n              b = d3.hsl(colours[1]); // L*a*b* might be better here...\n\n          return d3.hsl((a.h + b.h) / 2, a.s * 1.2, a.l / 1.2);\n        }\n\n        return d.colour || \"#fff\";\n      }\n\n      function key(d) {\n        var k = [];\n        var p = d;\n\n        while (p.depth) {\n          k.push(p.name);\n          p = p.parent;\n        }\n\n        return k.reverse().join(\".\");\n      }\n\n      function fill(d) {\n        var p = d;\n\n        while (p.depth > 1) {\n          p = p.parent;\n        }\n\n        var c = d3.lab(hue(p.name));\n        c.l = luminance(d.sum);\n        return c;\n      }\n\n      function arcTween(b) {\n        var i = d3.interpolate(this._current, b);\n        this._current = i(0);\n        return function (t) {\n          return arc(i(t));\n        };\n      }\n\n      function updateArc(d) {\n        return {\n          depth: d.depth,\n          x: d.x,\n          dx: d.dx\n        };\n      } //d3.select(self.frameElement).style(\"height\", margin.top + margin.bottom + \"px\");\n\n    }\n  }, {\n    key: \"next\",\n    value: function next() {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        id: \"Typo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"arrow-top\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"#section1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: wdscroll_bas,\n        alt: \"arrow_top\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }))), React.createElement(\"p\", {\n        className: \"arrow-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"#section-mapping\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: wdscroll_bas,\n        alt: \"arrow_right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return Type;\n}(React.Component);\n\nexport default Type;","map":{"version":3,"sources":["C:\\work\\Project\\reactJs\\observatoire\\src\\components\\type\\index.jsx"],"names":["React","d3","Type","props","map","next","bind","state","data","detailsByCountry","indiceInit","margin","top","right","bottom","left","radius","Math","min","x","scaleLinear","range","PI","y","scalePow","exponent","domain","padding","hue","luminance","scaleSqrt","clamp","svg","select","append","attr","partition","size","hierarchy","sum","d","sort","a","b","value","arc","startAngle","endAngle","dx","depth","innerRadius","outerRadius","json","error","root","nodes","forEach","_children","children","key","fill","node","slice","center","abc","selectAll","enter","path","style","each","_current","updateArc","textEnter","angle","centroid","text","name","split","colour","colours","hsl","h","s","l","k","p","push","parent","reverse","join","c","lab","arcTween","i","interpolate","t","wdscroll_bas","Component"],"mappings":"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","sourcesContent":["import './style.css';\r\nimport React from 'react';\r\nimport * as d3 from 'd3';\r\nimport wdscroll_bas from './wdscroll_bas.svg';\r\n\r\nclass Type extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.map = {};\r\n        this.next = this.next.bind(this);\r\n        this.state = { data: []\r\n            , detailsByCountry: []\r\n            , indiceInit: 0\r\n            }\r\n    }\r\n    \r\n    componentDidMount() {\r\n        var margin = {top: 350, right: 480, bottom: 350, left: 480};\r\n        var radius = Math.min(margin.top, margin.right, margin.bottom, margin.left) - 10;\r\n        var x = d3.scaleLinear().range([0, 2 * Math.PI]);\r\n        var y = d3.scalePow().exponent(1.3).domain([0, 1]).range([0, radius]);\r\n        var padding = 5;\r\n\r\n        // var hue = d3.scaleCategory10();\r\n        var hue = ['#d4eac7', '#c6e3b5', '#b7dda2', '#a9d68f', '#9bcf7d', '#8cc86a', '#7ec157', '#77be4e', '#70ba45', '#65a83e', '#599537', '#4e8230', '#437029', '#385d22', '#2d4a1c', '#223815'];\r\n\r\n        // colors = ['#d4eac7', '#c6e3b5', '#b7dda2', '#a9d68f', '#9bcf7d', '#8cc86a', '#7ec157', '#77be4e', '#70ba45', '#65a83e', '#599537', '#4e8230', '#437029', '#385d22', '#2d4a1c', '#223815'];\r\n\r\n\r\n        var luminance = d3.scaleSqrt()\r\n                .domain([0, 1e6])\r\n                .clamp(true)\r\n                .range([90, 20]);\r\n        /* var svg = d3.select(\"body\").append(\"svg\")\r\n         .attr(\"width\", width)\r\n         .attr(\"height\", height)\r\n         .append(\"g\")\r\n         .attr(\"transform\", \"translate(\" + width / 2 + \",\" + (height / 2 + 10) + \")\");\r\n         var g = svg.selectAll(\"g\")\r\n         .data(partition.nodes(root))\r\n         .enter().append(\"g\");\r\n         \r\n         var path = g.append(\"path\")\r\n         .attr(\"d\", arc)\r\n         .style(\"fill\", function(d) {\r\n         return color((d.children ? d : d.parent).name);\r\n         })\r\n         .on(\"click\", click);\r\n         var text = g.append(\"text\")\r\n         .attr(\"x\", function(d) {\r\n         return y(d.y);\r\n         })\r\n         .attr(\"dx\", \"6\") // margin\r\n         .attr(\"dy\", \".35em\") // vertical-align\r\n         .text(function(d) {\r\n         return d.name;\r\n         });*/\r\n\r\n        var svg = d3.select(\"body\").append(\"svg\")\r\n                .attr(\"width\", margin.left + margin.right)\r\n                .attr(\"height\", margin.top + margin.bottom)\r\n                .append(\"g\")\r\n                .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n\r\n        /*\r\n        var partition = d3.layout.partition()\r\n                .sort(function(a, b) {\r\n                    return d3.ascending(a.name, b.name);\r\n                })\r\n                .size([2 * Math.PI, radius]);\r\n\r\n        */\r\n\r\n        var partition = data => d3.partition()\r\n        .size([2 * Math.PI, radius])(d3.hierarchy(data)\r\n        .sum(d => d.size)\r\n        .sort((a, b) => b.value - a.value));\r\n\r\n        var arc = d3.svg.arc()\r\n                .startAngle(function(d) {\r\n                    return d.x;\r\n                })\r\n                .endAngle(function(d) {\r\n                    return d.x + d.dx - .01 / (d.depth + .2);\r\n                })\r\n                .innerRadius(function(d) {\r\n                    return radius / 3 * d.depth;\r\n                })\r\n                .outerRadius(function(d) {\r\n                    return radius / 3 * (d.depth + 1) - 1;\r\n                });\r\n\r\n        d3.json(\"./flare.json\", function(error, root) {\r\n            // Compute the initial layout on the entire tree to sum sizes.\r\n            // Also compute the full name and fill color for each node,\r\n            // and stash the children so they can be restored as we descend.\r\n            partition\r\n                    .value(function(d) {\r\n                        return d.size;\r\n                    })\r\n                    .nodes(root)\r\n                    .forEach(function(d) {\r\n                        d._children = d.children;\r\n                        d.sum = d.value;\r\n                        d.key = this.key(d);\r\n                        d.fill = this.fill(d);\r\n                    });\r\n\r\n            // Now redefine the value function to us e the previously-computed sum.\r\n            partition\r\n                    .children(function(d, depth) {\r\n\r\n                        return depth < 2 ? d._children : null;\r\n                    })\r\n                    .value(function(d) {\r\n\r\n                        return d.sum;\r\n                    });\r\n\r\n            var node = partition.nodes(root).slice(1);\r\n\r\n            var center = svg.append(\"circle\")\r\n                    .attr(\"r\", radius / 3);\r\n\r\n            var abc = svg.selectAll(\".arc\")\r\n                    .data(node)\r\n                    .enter()\r\n                    .append(\"g\")\r\n                    .attr(\"class\", \"arc\");\r\n\r\n            var path = abc.append(\"path\")\r\n                    .attr(\"d\", arc)\r\n                    .style(\"fill\", function(d) {\r\n                        return d.fill;\r\n                    })\r\n                    .each(function(d) {\r\n\r\n                        this._current = updateArc(d);\r\n                    });\r\n\r\n            var textEnter = abc.append(\"text\")\r\n                    .style(\"fill-opacity\", 1)\r\n                    .style(\"fill\", \"white\")\r\n\r\n                    .attr(\"text-anchor\", \"middle\")\r\n                    .attr(\"dy\", \".2em\")\r\n                    .attr(\"transform\", function(d) {\r\n                        var angle = x(d.x + d.dx / 2) * 180 / Math.PI - 90;\r\n                        return \"translate(\" + (arc.centroid(d)) + \")rotate(\" + (angle > 90 ? 0 : 0) + \")\";\r\n                    });\r\n\r\n            textEnter.append(\"tspan\")\r\n                    .attr(\"x\", 0)\r\n                    .text(function(d) {\r\n                        return d.name;\r\n                    });\r\n            textEnter.append(\"tspan\")\r\n                    .attr(\"x\", 0)\r\n                    .attr(\"dy\", \"1em\")\r\n                    .text(function(d) {\r\n                        return d.depth ? d.name.split(\" \")[1] || \"\" : \"\";\r\n                    });\r\n\r\n        });\r\n\r\n        function colour(d) {\r\n            if (d.children) {\r\n                // There is a maximum of two children!\r\n                var colours = d.children.map(colour),\r\n                        a = d3.hsl(colours[0]),\r\n                        b = d3.hsl(colours[1]);\r\n                // L*a*b* might be better here...\r\n                return d3.hsl((a.h + b.h) / 2, a.s * 1.2, a.l / 1.2);\r\n            }\r\n            return d.colour || \"#fff\";\r\n        }\r\n\r\n        function key(d) {\r\n            var k = [];\r\n            let p = d;\r\n            while (p.depth) {\r\n                k.push(p.name);\r\n                p = p.parent;\r\n            }\r\n            return k.reverse().join(\".\");\r\n                \r\n        }\r\n\r\n        function fill(d) {\r\n            var p = d;\r\n            while (p.depth > 1)\r\n                p = p.parent;\r\n            var c = d3.lab(hue(p.name));\r\n            c.l = luminance(d.sum);\r\n            return c;\r\n        }\r\n\r\n        function arcTween(b) {\r\n            var i = d3.interpolate(this._current, b);\r\n            this._current = i(0);\r\n            return function(t) {\r\n                return arc(i(t));\r\n            };\r\n        }\r\n\r\n        function updateArc(d) {\r\n            return {depth: d.depth, x: d.x, dx: d.dx};\r\n        }\r\n        //d3.select(self.frameElement).style(\"height\", margin.top + margin.bottom + \"px\");\r\n\r\n    }\r\n    \r\n    next() {\r\n       \r\n    }\r\n\r\n    render() {\r\n    return <div id=\"Typo\">\r\n        <p className=\"arrow-top\"><a href=\"#section1\"><img src={wdscroll_bas} alt=\"arrow_top\" /></a></p>\r\n        <p className=\"arrow-right\"><a href=\"#section-mapping\"><img src={wdscroll_bas} alt=\"arrow_right\" /></a></p>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default Type;"]},"metadata":{},"sourceType":"module"}