{"ast":null,"code":"import _classCallCheck from \"C:\\\\work\\\\Project\\\\reactJs\\\\observatoire\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\work\\\\Project\\\\reactJs\\\\observatoire\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\work\\\\Project\\\\reactJs\\\\observatoire\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\work\\\\Project\\\\reactJs\\\\observatoire\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\work\\\\Project\\\\reactJs\\\\observatoire\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\work\\\\Project\\\\reactJs\\\\observatoire\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\work\\\\Project\\\\reactJs\\\\observatoire\\\\src\\\\components\\\\type\\\\index.jsx\";\nimport './style.css';\nimport React from 'react';\nimport * as d3 from 'd3';\nimport wdscroll_bas from \"./wdscroll_bas.svg\";\n\nvar Type =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Type, _React$Component);\n\n  function Type(props) {\n    var _this;\n\n    _classCallCheck(this, Type);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Type).call(this, props));\n    _this.map = {};\n    _this.next = _this.next.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      data: [],\n      detailsByCountry: [],\n      indiceInit: 0\n    };\n    return _this;\n  }\n\n  _createClass(Type, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var margin = {\n        top: 350,\n        right: 480,\n        bottom: 350,\n        left: 480\n      };\n      var radius = Math.min(margin.top, margin.right, margin.bottom, margin.left) - 10;\n      var x = d3.scale.linear().range([0, 2 * Math.PI]);\n      var y = d3.scale.pow().exponent(1.3).domain([0, 1]).range([0, radius]);\n      var padding = 5;\n      var hue = d3.scale.category10();\n      var luminance = d3.scale.sqrt().domain([0, 1e6]).clamp(true).range([90, 20]);\n      /* var svg = d3.select(\"body\").append(\"svg\")\r\n       .attr(\"width\", width)\r\n       .attr(\"height\", height)\r\n       .append(\"g\")\r\n       .attr(\"transform\", \"translate(\" + width / 2 + \",\" + (height / 2 + 10) + \")\");\r\n       var g = svg.selectAll(\"g\")\r\n       .data(partition.nodes(root))\r\n       .enter().append(\"g\");\r\n       \r\n       var path = g.append(\"path\")\r\n       .attr(\"d\", arc)\r\n       .style(\"fill\", function(d) {\r\n       return color((d.children ? d : d.parent).name);\r\n       })\r\n       .on(\"click\", click);\r\n       var text = g.append(\"text\")\r\n       .attr(\"x\", function(d) {\r\n       return y(d.y);\r\n       })\r\n       .attr(\"dx\", \"6\") // margin\r\n       .attr(\"dy\", \".35em\") // vertical-align\r\n       .text(function(d) {\r\n       return d.name;\r\n       });*/\n\n      var svg = d3.select(\"body\").append(\"svg\").attr(\"width\", margin.left + margin.right).attr(\"height\", margin.top + margin.bottom).append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n      var partition = d3.layout.partition().sort(function (a, b) {\n        return d3.ascending(a.name, b.name);\n      }).size([2 * Math.PI, radius]);\n      var arc = d3.svg.arc().startAngle(function (d) {\n        return d.x;\n      }).endAngle(function (d) {\n        return d.x + d.dx - .01 / (d.depth + .2);\n      }).innerRadius(function (d) {\n        return radius / 3 * d.depth;\n      }).outerRadius(function (d) {\n        return radius / 3 * (d.depth + 1) - 1;\n      });\n      d3.json(\"./flare.json\", function (error, root) {\n        // Compute the initial layout on the entire tree to sum sizes.\n        // Also compute the full name and fill color for each node,\n        // and stash the children so they can be restored as we descend.\n        partition.value(function (d) {\n          return d.size;\n        }).nodes(root).forEach(function (d) {\n          d._children = d.children;\n          d.sum = d.value;\n          d.key = this.key(d);\n          d.fill = this.fill(d);\n        }); // Now redefine the value function to us e the previously-computed sum.\n\n        partition.children(function (d, depth) {\n          return depth < 2 ? d._children : null;\n        }).value(function (d) {\n          return d.sum;\n        });\n        var node = partition.nodes(root).slice(1);\n        var center = svg.append(\"circle\").attr(\"r\", radius / 3).on(\"click\", zoomOut);\n        var abc = svg.selectAll(\".arc\").data(node).enter().append(\"g\").attr(\"class\", \"arc\");\n        var path = abc.append(\"path\").attr(\"d\", arc).style(\"fill\", function (d) {\n          return d.fill;\n        }).each(function (d) {\n          this._current = updateArc(d);\n        }).on(\"click\", zoomIn);\n        var textEnter = abc.append(\"text\").style(\"fill-opacity\", 1).style(\"fill\", \"white\").attr(\"text-anchor\", \"middle\").attr(\"dy\", \".2em\").attr(\"transform\", function (d) {\n          var angle = x(d.x + d.dx / 2) * 180 / Math.PI - 90;\n          return \"translate(\" + arc.centroid(d) + \")rotate(\" + (angle > 90 ? 0 : 0) + \")\";\n        }).on(\"click\", zoomIn);\n        textEnter.append(\"tspan\").attr(\"x\", 0).text(function (d) {\n          return d.name;\n        });\n        textEnter.append(\"tspan\").attr(\"x\", 0).attr(\"dy\", \"1em\").text(function (d) {\n          return d.depth ? d.name.split(\" \")[1] || \"\" : \"\";\n        });\n\n        function zoomIn(p) {\n          if (p.depth > 1) p = p.parent;\n          if (!p.children) return;\n          zoom(p, p);\n        }\n\n        function zoomOut(p) {\n          if (!p.parent) return;\n          zoom(p.parent, p);\n        } // Zoom to the specified new root.\n\n\n        function zoom(root, p) {\n          //textEnter.transition().attr(\"opacity\", 0);\n          if (document.documentElement.__transition__) return; // Rescale outside angles to match the new layout.\n\n          var enterArc,\n              exitArc,\n              outsideAngle = d3.scale.linear().domain([0, 2 * Math.PI]);\n\n          function insideArc(d) {\n            return p.key > d.key ? {\n              depth: d.depth - 1,\n              x: 0,\n              dx: 0\n            } : p.key < d.key ? {\n              depth: d.depth - 1,\n              x: 2 * Math.PI,\n              dx: 0\n            } : {\n              depth: 0,\n              x: 0,\n              dx: 2 * Math.PI\n            };\n          }\n\n          function outsideArc(d) {\n            return {\n              depth: d.depth + 1,\n              x: outsideAngle(d.x),\n              dx: outsideAngle(d.x + d.dx) - outsideAngle(d.x)\n            };\n          }\n\n          center.datum(root); // When zooming in, arcs enter from the outside and exit to the inside.\n          // Entering outside arcs start from the old layout.\n\n          if (root === p) enterArc = outsideArc, exitArc = insideArc, outsideAngle.range([p.x, p.x + p.dx]);\n          path = path.data(partition.nodes(root).slice(1), function (d) {\n            return d.key;\n          });\n          textEnter = textEnter.data(partition.nodes(root).slice(1), function (d) {\n            return d.key;\n          }); // When zooming out, arcs enter from the inside and exit to the outside.\n          // Exiting outside arcs transition to the new layout.\n\n          if (root !== p) enterArc = insideArc, exitArc = outsideArc, outsideAngle.range([p.x, p.x + p.dx]);\n          d3.transition().duration(d3.event.altKey ? 7500 : 750).each(function () {\n            path.exit().transition().style(\"fill-opacity\", function (d) {\n              return d.depth === 1 + (root === p) ? 1 : 0;\n            }).attrTween(\"d\", function (d) {\n              return arcTween.call(this, exitArc(d));\n            }).remove();\n            d3.selectAll(\"text\").remove(); //d3.selectAll(\"g\").remove();\n\n            /*svg = d3.select(\"body\").append(\"svg\")\r\n             .attr(\"width\", margin.left + margin.right)\r\n             .attr(\"height\", margin.top + margin.bottom)\r\n             .append(\"g\")\r\n             .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n             abc = svg.selectAll(\".arc\")\r\n             .data(node)\r\n             .enter()\r\n             .append(\"g\")\r\n             .attr(\"class\", \"arc\");*/\n            // d3.transition().attr(\"opacity\", 0);\n            // textEnter.remove();\n\n            path.enter().append(\"path\").style(\"fill-opacity\", function (d) {\n              return d.depth === 2 - (root === p) ? 1 : 0;\n            }).style(\"fill\", function (d) {\n              return d.fill;\n            }).on(\"click\", zoomIn).each(function (d) {\n              this._current = enterArc(d);\n            });\n            textEnter.enter().append(\"text\").style(\"fill\", \"white\").attr(\"transform\", function (d) {\n              var angle = x(d.x + d.dx / 2) * 180 / Math.PI - 90;\n              return \"translate(\" + arc.centroid(d) + \")rotate(\" + (angle > 90 ? 0 : 0) + \")\";\n            }).attr(\"text-anchor\", \"middle\").text(function (d) {\n              return d.name;\n            }).on(\"click\", zoomIn);\n            path.transition().style(\"fill-opacity\", 1).attrTween(\"d\", function (d) {\n              return arcTween.call(this, updateArc(d));\n            });\n          });\n        }\n      });\n\n      function colour(d) {\n        if (d.children) {\n          // There is a maximum of two children!\n          var colours = d.children.map(colour),\n              a = d3.hsl(colours[0]),\n              b = d3.hsl(colours[1]); // L*a*b* might be better here...\n\n          return d3.hsl((a.h + b.h) / 2, a.s * 1.2, a.l / 1.2);\n        }\n\n        return d.colour || \"#fff\";\n      }\n\n      function key(d) {\n        var k = [],\n            p = d;\n\n        while (p.depth) {\n          k.push(p.name), p = p.parent;\n        }\n\n        return k.reverse().join(\".\");\n      }\n\n      function fill(d) {\n        var p = d;\n\n        while (p.depth > 1) {\n          p = p.parent;\n        }\n\n        var c = d3.lab(hue(p.name));\n        c.l = luminance(d.sum);\n        return c;\n      }\n\n      function arcTween(b) {\n        var i = d3.interpolate(this._current, b);\n        this._current = i(0);\n        return function (t) {\n          return arc(i(t));\n        };\n      }\n\n      function updateArc(d) {\n        return {\n          depth: d.depth,\n          x: d.x,\n          dx: d.dx\n        };\n      }\n\n      d3.select(self.frameElement).style(\"height\", margin.top + margin.bottom + \"px\");\n    }\n  }, {\n    key: \"next\",\n    value: function next() {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        id: \"Typo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"arrow-top\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"#section1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: wdscroll_bas,\n        alt: \"arrow_top\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321\n        },\n        __self: this\n      }))), React.createElement(\"p\", {\n        className: \"arrow-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"#section-mapping\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: wdscroll_bas,\n        alt: \"arrow_right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return Type;\n}(React.Component);\n\nexport default Map;","map":{"version":3,"sources":["C:\\work\\Project\\reactJs\\observatoire\\src\\components\\type\\index.jsx"],"names":["React","d3","Type","props","map","next","bind","state","data","detailsByCountry","indiceInit","margin","top","right","bottom","left","radius","Math","min","x","scale","linear","range","PI","y","pow","exponent","domain","padding","hue","category10","luminance","sqrt","clamp","svg","select","append","attr","partition","layout","sort","a","b","ascending","name","size","arc","startAngle","d","endAngle","dx","depth","innerRadius","outerRadius","json","error","root","value","nodes","forEach","_children","children","sum","key","fill","node","slice","center","on","zoomOut","abc","selectAll","enter","path","style","each","_current","updateArc","zoomIn","textEnter","angle","centroid","text","split","p","parent","zoom","document","documentElement","__transition__","enterArc","exitArc","outsideAngle","insideArc","outsideArc","datum","transition","duration","event","altKey","exit","attrTween","arcTween","call","remove","colour","colours","hsl","h","s","l","k","push","reverse","join","c","lab","i","interpolate","t","self","frameElement","wdscroll_bas","Component","Map"],"mappings":"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","sourcesContent":["import './style.css';\r\nimport React from 'react';\r\nimport * as d3 from 'd3';\r\nimport wdscroll_bas from './wdscroll_bas.svg';\r\n\r\nclass Type extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.map = {};\r\n        this.next = this.next.bind(this);\r\n        this.state = { data: []\r\n            , detailsByCountry: []\r\n            , indiceInit: 0\r\n            }\r\n    }\r\n    \r\n    componentDidMount() {\r\n        var margin = {top: 350, right: 480, bottom: 350, left: 480};\r\n        var radius = Math.min(margin.top, margin.right, margin.bottom, margin.left) - 10;\r\n        var x = d3.scale.linear().range([0, 2 * Math.PI]);\r\n        var y = d3.scale.pow().exponent(1.3).domain([0, 1]).range([0, radius]);\r\n        var padding = 5;\r\n\r\n        var hue = d3.scale.category10();\r\n\r\n        var luminance = d3.scale.sqrt()\r\n                .domain([0, 1e6])\r\n                .clamp(true)\r\n                .range([90, 20]);\r\n        /* var svg = d3.select(\"body\").append(\"svg\")\r\n         .attr(\"width\", width)\r\n         .attr(\"height\", height)\r\n         .append(\"g\")\r\n         .attr(\"transform\", \"translate(\" + width / 2 + \",\" + (height / 2 + 10) + \")\");\r\n         var g = svg.selectAll(\"g\")\r\n         .data(partition.nodes(root))\r\n         .enter().append(\"g\");\r\n         \r\n         var path = g.append(\"path\")\r\n         .attr(\"d\", arc)\r\n         .style(\"fill\", function(d) {\r\n         return color((d.children ? d : d.parent).name);\r\n         })\r\n         .on(\"click\", click);\r\n         var text = g.append(\"text\")\r\n         .attr(\"x\", function(d) {\r\n         return y(d.y);\r\n         })\r\n         .attr(\"dx\", \"6\") // margin\r\n         .attr(\"dy\", \".35em\") // vertical-align\r\n         .text(function(d) {\r\n         return d.name;\r\n         });*/\r\n\r\n        var svg = d3.select(\"body\").append(\"svg\")\r\n                .attr(\"width\", margin.left + margin.right)\r\n                .attr(\"height\", margin.top + margin.bottom)\r\n                .append(\"g\")\r\n                .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n\r\n        var partition = d3.layout.partition()\r\n                .sort(function(a, b) {\r\n                    return d3.ascending(a.name, b.name);\r\n                })\r\n                .size([2 * Math.PI, radius]);\r\n\r\n        var arc = d3.svg.arc()\r\n                .startAngle(function(d) {\r\n                    return d.x;\r\n                })\r\n                .endAngle(function(d) {\r\n                    return d.x + d.dx - .01 / (d.depth + .2);\r\n                })\r\n                .innerRadius(function(d) {\r\n                    return radius / 3 * d.depth;\r\n                })\r\n                .outerRadius(function(d) {\r\n                    return radius / 3 * (d.depth + 1) - 1;\r\n                });\r\n\r\n        d3.json(\"./flare.json\", function(error, root) {\r\n            // Compute the initial layout on the entire tree to sum sizes.\r\n            // Also compute the full name and fill color for each node,\r\n            // and stash the children so they can be restored as we descend.\r\n            partition\r\n                    .value(function(d) {\r\n                        return d.size;\r\n                    })\r\n                    .nodes(root)\r\n                    .forEach(function(d) {\r\n                        d._children = d.children;\r\n                        d.sum = d.value;\r\n                        d.key = this.key(d);\r\n                        d.fill = this.fill(d);\r\n                    });\r\n\r\n            // Now redefine the value function to us e the previously-computed sum.\r\n            partition\r\n                    .children(function(d, depth) {\r\n\r\n                        return depth < 2 ? d._children : null;\r\n                    })\r\n                    .value(function(d) {\r\n\r\n                        return d.sum;\r\n                    });\r\n\r\n            var node = partition.nodes(root).slice(1);\r\n\r\n            var center = svg.append(\"circle\")\r\n                    .attr(\"r\", radius / 3)\r\n                    .on(\"click\", zoomOut);\r\n\r\n            var abc = svg.selectAll(\".arc\")\r\n                    .data(node)\r\n                    .enter()\r\n                    .append(\"g\")\r\n                    .attr(\"class\", \"arc\");\r\n\r\n            var path = abc.append(\"path\")\r\n                    .attr(\"d\", arc)\r\n                    .style(\"fill\", function(d) {\r\n                        return d.fill;\r\n                    })\r\n                    .each(function(d) {\r\n\r\n                        this._current = updateArc(d);\r\n                    })\r\n                    .on(\"click\", zoomIn);\r\n\r\n            var textEnter = abc.append(\"text\")\r\n                    .style(\"fill-opacity\", 1)\r\n                    .style(\"fill\", \"white\")\r\n\r\n                    .attr(\"text-anchor\", \"middle\")\r\n                    .attr(\"dy\", \".2em\")\r\n                    .attr(\"transform\", function(d) {\r\n                        var angle = x(d.x + d.dx / 2) * 180 / Math.PI - 90;\r\n                        return \"translate(\" + (arc.centroid(d)) + \")rotate(\" + (angle > 90 ? 0 : 0) + \")\";\r\n                    }).on(\"click\", zoomIn);\r\n\r\n            textEnter.append(\"tspan\")\r\n                    .attr(\"x\", 0)\r\n                    .text(function(d) {\r\n                        return d.name;\r\n                    });\r\n            textEnter.append(\"tspan\")\r\n                    .attr(\"x\", 0)\r\n                    .attr(\"dy\", \"1em\")\r\n                    .text(function(d) {\r\n                        return d.depth ? d.name.split(\" \")[1] || \"\" : \"\";\r\n                    });\r\n\r\n\r\n            function zoomIn(p) {\r\n                if (p.depth > 1)\r\n                    p = p.parent;\r\n                if (!p.children)\r\n                    return;\r\n                zoom(p, p);\r\n            }\r\n\r\n            function zoomOut(p) {\r\n                if (!p.parent)\r\n                    return;\r\n                zoom(p.parent, p);\r\n            }\r\n\r\n            // Zoom to the specified new root.\r\n            function zoom(root, p) {\r\n                //textEnter.transition().attr(\"opacity\", 0);\r\n                if (document.documentElement.__transition__)\r\n                    return;\r\n\r\n                // Rescale outside angles to match the new layout.\r\n                var enterArc,\r\n                        exitArc,\r\n                        outsideAngle = d3.scale.linear().domain([0, 2 * Math.PI]);\r\n\r\n                function insideArc(d) {\r\n                    return p.key > d.key\r\n                            ? {depth: d.depth - 1, x: 0, dx: 0} : p.key < d.key\r\n                            ? {depth: d.depth - 1, x: 2 * Math.PI, dx: 0}\r\n                    : {depth: 0, x: 0, dx: 2 * Math.PI};\r\n                }\r\n\r\n                function outsideArc(d) {\r\n                    return {depth: d.depth + 1, x: outsideAngle(d.x), dx: outsideAngle(d.x + d.dx) - outsideAngle(d.x)};\r\n                }\r\n\r\n                center.datum(root);\r\n\r\n                // When zooming in, arcs enter from the outside and exit to the inside.\r\n                // Entering outside arcs start from the old layout.\r\n                if (root === p)\r\n                    enterArc = outsideArc, exitArc = insideArc, outsideAngle.range([p.x, p.x + p.dx]);\r\n\r\n                path = path.data(partition.nodes(root).slice(1), function(d) {\r\n                    return d.key;\r\n                });\r\n                textEnter = textEnter.data(partition.nodes(root).slice(1), function(d) {\r\n                    \r\n                    return d.key;\r\n                });\r\n\r\n                // When zooming out, arcs enter from the inside and exit to the outside.\r\n                // Exiting outside arcs transition to the new layout.\r\n                if (root !== p)\r\n                    enterArc = insideArc, exitArc = outsideArc, outsideAngle.range([p.x, p.x + p.dx]);\r\n\r\n                d3.transition().duration(d3.event.altKey ? 7500 : 750).each(function() {\r\n\r\n                \r\n                    path.exit().transition()\r\n                            .style(\"fill-opacity\", function(d) {\r\n\r\n                                return d.depth === 1 + (root === p) ? 1 : 0;\r\n                            })\r\n                            .attrTween(\"d\", function(d) {\r\n                                return arcTween.call(this, exitArc(d));\r\n                            })\r\n                            .remove();\r\n                   \r\n                    d3.selectAll(\"text\").remove();\r\n                   \r\n                    //d3.selectAll(\"g\").remove();\r\n                    /*svg = d3.select(\"body\").append(\"svg\")\r\n                     .attr(\"width\", margin.left + margin.right)\r\n                     .attr(\"height\", margin.top + margin.bottom)\r\n                     .append(\"g\")\r\n                     .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n                     abc = svg.selectAll(\".arc\")\r\n                     .data(node)\r\n                     .enter()\r\n                     .append(\"g\")\r\n                     .attr(\"class\", \"arc\");*/\r\n                    // d3.transition().attr(\"opacity\", 0);\r\n                    // textEnter.remove();\r\n\r\n\r\n                   path.enter().append(\"path\")\r\n                            .style(\"fill-opacity\", function(d) {\r\n                                return d.depth === 2 - (root === p) ? 1 : 0;\r\n                            })\r\n                            .style(\"fill\", function(d) {\r\n                                return d.fill;\r\n                            })\r\n                            .on(\"click\", zoomIn)\r\n                            .each(function(d) {\r\n                                this._current = enterArc(d);\r\n                            });\r\n\r\n                    textEnter.enter().append(\"text\")               \r\n                            .style(\"fill\", \"white\")\r\n                            .attr(\"transform\", function(d) {\r\n                                var angle = x(d.x + d.dx / 2) * 180 / Math.PI - 90;\r\n                                return \"translate(\" + (arc.centroid(d)) + \")rotate(\" + (angle > 90 ? 0 : 0) + \")\";\r\n                            }).attr(\"text-anchor\", \"middle\")\r\n                            .text(function(d) {\r\n                                return d.name;\r\n                            }).on(\"click\", zoomIn);\r\n                            \r\n                    path.transition()\r\n                            .style(\"fill-opacity\", 1)\r\n                            .attrTween(\"d\", function(d) {\r\n                                return arcTween.call(this, updateArc(d));\r\n                            });\r\n                });\r\n            }\r\n        });\r\n\r\n        function colour(d) {\r\n            if (d.children) {\r\n                // There is a maximum of two children!\r\n                var colours = d.children.map(colour),\r\n                        a = d3.hsl(colours[0]),\r\n                        b = d3.hsl(colours[1]);\r\n                // L*a*b* might be better here...\r\n                return d3.hsl((a.h + b.h) / 2, a.s * 1.2, a.l / 1.2);\r\n            }\r\n            return d.colour || \"#fff\";\r\n        }\r\n\r\n        function key(d) {\r\n            var k = [], p = d;\r\n            while (p.depth)\r\n                k.push(p.name), p = p.parent;\r\n            return k.reverse().join(\".\");\r\n        }\r\n\r\n        function fill(d) {\r\n            var p = d;\r\n            while (p.depth > 1)\r\n                p = p.parent;\r\n            var c = d3.lab(hue(p.name));\r\n            c.l = luminance(d.sum);\r\n            return c;\r\n        }\r\n\r\n        function arcTween(b) {\r\n            var i = d3.interpolate(this._current, b);\r\n            this._current = i(0);\r\n            return function(t) {\r\n                return arc(i(t));\r\n            };\r\n        }\r\n\r\n        function updateArc(d) {\r\n            return {depth: d.depth, x: d.x, dx: d.dx};\r\n        }\r\n        d3.select(self.frameElement).style(\"height\", margin.top + margin.bottom + \"px\");\r\n\r\n    }\r\n    \r\n    next() {\r\n       \r\n    }\r\n\r\n    render() {\r\n    return <div id=\"Typo\">\r\n        <p className=\"arrow-top\"><a href=\"#section1\"><img src={wdscroll_bas} alt=\"arrow_top\" /></a></p>\r\n        <p className=\"arrow-right\"><a href=\"#section-mapping\"><img src={wdscroll_bas} alt=\"arrow_right\" /></a></p>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default Map;"]},"metadata":{},"sourceType":"module"}